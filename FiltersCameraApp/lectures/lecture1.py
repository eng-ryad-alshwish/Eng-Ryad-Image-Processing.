import streamlit as st
import cv2
import numpy as np
from PIL import Image

def run():
    # ===============================
    # ๐ ุงูุดุฑุญ ุงููุธุฑู (ููุซู 6โ8 ุฃุณุทุฑ)
    # ===============================
    st.title("๐ ุงููุญุงุถุฑุฉ 1: ูุฏุฎู ููุนูุงุฑูุฉ ุงูุตูุฑ ุงูุฑูููุฉ")
    st.markdown("""
    ุงูุตูุฑุฉ ุงูุฑูููุฉ **Digital Image** ูู ุชูุซูู ุนุฏุฏู ููุตูููุฉ ุซูุงุฆูุฉ ุฃู ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ 
    ุชุชููู ูู ููุงุท ุตุบูุฑุฉ ุชุณูู **ุจูุณูุงุช (Pixels)**ุ ููู ุจูุณู ููุซู ุฃุตุบุฑ ุนูุตุฑ ูู ุงูุตูุฑุฉ.
    
    ูู ุตูุฑุฉ ูุชู ุชุนุฑูููุง ุจูุงุณุทุฉ ุซูุงุซุฉ ุนูุงุตุฑ ุฃุณุงุณูุฉ:
    1. **ุงูุฃุจุนุงุฏ (Height ร Width)**: ุชุญุฏุฏ ุนุฏุฏ ุงูุตููู ูุงูุฃุนูุฏุฉ ูู ุงูุจูุณูุงุช.
    2. **ุงููููุงุช (Channels)**: ูุซู ููุงุฉ ูุงุญุฏุฉ (ุฑูุงุฏู) ุฃู ุซูุงุซ ูููุงุช (ููููุฉ RGB).
    3. **ุงูุนูู ุงููููู (Bit Depth)**: ูุญุฏุฏ ุนุฏุฏ ุงูููู ุงูููููุฉ ููุจูุณู (8-bit โ 256 ูุณุชููุ 16-bit โ 65536 ูุณุชูู).

    ุนูู ุณุจูู ุงููุซุงู: ุตูุฑุฉ ููููุฉ ุจุญุฌู (1080ร1920ร3) ุชุญุชูู ุนูู 1080 ุตููุง ู1920 ุนููุฏูุง 
    ู3 ูููุงุช (ุฃุญูุฑุ ุฃุฎุถุฑุ ุฃุฒุฑู). ูู ุจูุณู ูุญุชูู ุนูู ููู ุฑูููุฉ ุจูู 0 ู255 
    ุชุญุฏุฏ ุดุฏุฉ ุงูููู ูู ูู ููุงุฉ.
    """)

    st.divider()

    # ===============================
    # ๐ค ุฑูุน ุตูุฑุฉ / ุตูุฑุฉ ุงูุชุฑุงุถูุฉ
    # ===============================
    uploaded_file = st.file_uploader("๐ค ูู ุจุฑูุน ุตูุฑุฉ ูุงูุชุดุงู ูุนูููุงุชูุง ", type=["jpg", "png", "jpeg"])
    
    if uploaded_file:
        # ุฅุฐุง ุฑูุน ุตูุฑุฉ
        file_bytes = np.asarray(bytearray(uploaded_file.read()), dtype=np.uint8)
        img = cv2.imdecode(file_bytes, cv2.IMREAD_COLOR)
        img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
        
        # ===============================
        # โน๏ธ ุนุฑุถ ูุนูููุงุช ุงูุตูุฑุฉ
        # ===============================
        height, width = img.shape[:2]
        channels = 1 if len(img.shape) == 2 else img.shape[2]
        bit_depth = img.dtype.itemsize * 8

        st.subheader("โน๏ธ ูุนูููุงุช ุนู ุงูุตูุฑุฉ:")
        st.write(f"- **ุงูุนุฑุถ (Width):** {width} ุจูุณู")
        st.write(f"- **ุงูุงุฑุชูุงุน (Height):** {height} ุจูุณู")
        st.write(f"- **ุนุฏุฏ ุงููููุงุช (Channels):** {channels}")
        st.write(f"- **ุงูุนูู ุงููููู (Bit Depth):** {bit_depth}-bit")

        # ===============================
        # ๐ผ๏ธ ุนุฑุถ ุงูุตูุฑุฉ
        # ===============================
        st.subheader("๐ผ๏ธ ุงูุตูุฑุฉ ุงูุฃุตููุฉ")
        st.image(img, use_column_width=True)
    else:
        pass    

